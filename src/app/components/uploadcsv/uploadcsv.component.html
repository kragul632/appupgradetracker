<div class="container mt-4">
  <h3>Upload CSV</h3>

  <!-- File input with ID for reset -->
  <input type="file" id="csvInput" (change)="onFileSelected($event)" accept=".csv" class="form-control mb-3" />

  <!-- Upload button -->
  <button class="btn btn-primary" (click)="submitCsv()">Upload</button>

  <!-- Upload result message -->
  <div class="alert mt-3" [ngClass]="{
    'alert-success': uploadResult.startsWith('✅'),
    'alert-danger': uploadResult.startsWith('❌'),
    'alert-warning': uploadResult.startsWith('⚠️')
  }" *ngIf="uploadResult">
    {{ uploadResult }}
  </div>

  <!-- Table to display submissions -->
  <table class="table table-bordered mt-4" *ngIf="submissions.length > 0">
    <thead>
      <tr>
        <th>App ID</th>
        <th>App Name</th>
        <th>Resource ID</th>
        <th>Resource Name</th>
        <th>Role</th>
        <th>Start Date</th>
        <th>End Date</th>
        <th>Total Hours</th>
        <th>Total Cost</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let sub of submissions">
        <td>{{ sub.applicationId }}</td>
        <td>{{ sub.appName }}</td>
        <td>{{ sub.resourceId }}</td>
        <td>{{ sub.resourceName }}</td>
        <td>{{ sub.roleName }}</td>
        <td>{{ sub.startDate | date }}</td>
        <td>{{ sub.endDate | date }}</td>
        <td>{{ sub.totalEffortHours }}</td>
        <td>{{ sub.totalCost }}</td>
      </tr>
    </tbody>
  </table>
</div>
